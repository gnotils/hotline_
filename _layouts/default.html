<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Liminal OS 95</title>
    <style>
        /* 기본 변수 및 스타일 (이전과 동일) */
        :root { --win-bg: #008080; --win-silver: #c0c0c0; --win-dark: #808080; --win-light: #ffffff; }
        body { margin: 0; background: var(--win-bg); font-family: "Fixedsys", monospace; height: 100vh; overflow: hidden; }

        /* 커서 설정 */
        html, body { cursor: url('https://win98icons.alexmeub.com/cursors/arrow.png'), auto !important; }
        button, .start-btn, .icon, .task-tab { cursor: url('https://win98icons.alexmeub.com/cursors/pointer.png'), pointer !important; }

        /* 바탕화면 */
        .desktop { position: relative; width: 100%; height: calc(100vh - 32px); padding: 20px; box-sizing: border-box; }
        .icon { width: 70px; text-align: center; color: white; font-size: 11px; margin-bottom: 20px; text-shadow: 1px 1px 1px black; }
        .icon img { width: 32px; image-rendering: pixelated; }

        /* 동적 윈도우 프레임 */
        .window {
            position: absolute; background: var(--win-silver);
            border: 2px solid; border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light);
            display: flex; flex-direction: column; min-width: 300px; min-height: 200px;
            box-shadow: 4px 4px 10px rgba(0,0,0,0.3);
        }
        .window.active { z-index: 5000 !important; } /* 활성화된 창이 맨 위로 */

        .title-bar {
            background: #808080; color: #c0c0c0; padding: 3px 5px;
            display: flex; justify-content: space-between; align-items: center; font-weight: bold;
        }
        .window.active .title-bar { background: linear-gradient(90deg, #000080, #1084d0); color: white; }
        .title-bar-controls button { width: 16px; height: 14px; font-size: 9px; padding: 0; background: var(--win-silver); border: 1px solid; border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light); }

        .window-content { flex: 1; background: white; margin: 2px; border: 2px inset var(--win-silver); padding: 15px; overflow: auto; }

        /* 태스크바 */
        .taskbar {
            position: fixed; bottom: 0; width: 100%; height: 32px; background: var(--win-silver);
            border-top: 2px solid var(--win-light); display: flex; align-items: center; padding: 2px; z-index: 9999;
        }
        .task-tabs-container { display: flex; gap: 4px; margin-left: 5px; flex: 1; }
        .task-tab {
            width: 150px; height: 24px; background: var(--win-silver); border: 2px solid;
            border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light);
            display: flex; align-items: center; gap: 5px; padding: 0 5px; font-size: 11px;
        }
        .task-tab.active { border-color: var(--win-dark) var(--win-light) var(--win-light) var(--win-dark); background: #e0e0e0; font-weight: bold; }

        /* 노이즈 및 효과 */
        .noise-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url('https://replicate.delivery/pbxt/J6TzJzG3T6f3ZkX6V5f5JzG3T6f3ZkX6V5f5/noise.png'); opacity: 0.05; z-index: 10000; pointer-events: none; }
    </style>
</head>
<body>
    <div class="noise-overlay"></div>
    
    <div class="desktop" id="desktop">
        <div class="icon" onclick="createWindow('My Documents', '여기는 문서 보관함입니다...')">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_open_file_ed-4.png"><br>Documents
        </div>
        <div class="icon" onclick="createWindow('Recycle Bin', '버려진 파일들이 울고 있습니다.')">
            <img src="https://win98icons.alexmeub.com/icons/png/recycle_bin_empty-0.png"><br>Recycle Bin
        </div>
    </div>

    <div class="taskbar">
        <div class="start-btn" style="border: 2px solid; border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light); padding: 2px 8px; font-weight: bold;">Start</div>
        <div class="task-tabs-container" id="task-tabs"></div>
        <div style="border: 2px inset white; padding: 2px 10px; font-size: 12px;" id="clock">00:00</div>
    </div>

    <script>
        let windowCount = 0;
        let highestZ = 1000;

        function createWindow(title, content) {
            windowCount++;
            const winId = 'win-' + windowCount;
            
            // 1. 윈도우 HTML 생성
            const win = document.createElement('div');
            win.className = 'window active';
            win.id = winId;
            win.style.left = (50 + (windowCount * 20)) + 'px';
            win.style.top = (50 + (windowCount * 20)) + 'px';
            win.style.zIndex = ++highestZ;

            win.innerHTML = `
                <div class="title-bar" onmousedown="focusWindow('${winId}')">
                    <span>${title}</span>
                    <div class="title-bar-controls">
                        <button onclick="closeWindow('${winId}')">X</button>
                    </div>
                </div>
                <div class="window-content">${content}</div>
            `;
            
            // 드래그 기능 (간소화)
            win.onmousedown = () => focusWindow(winId);
            
            document.getElementById('desktop').appendChild(win);

            // 2. 태스크바 탭 생성
            const tab = document.createElement('div');
            tab.className = 'task-tab active';
            tab.id = 'tab-' + winId;
            tab.innerHTML = `<span>${title}</span>`;
            tab.onclick = () => focusWindow(winId);
            document.getElementById('task-tabs').appendChild(tab);

            focusWindow(winId);
        }

        function focusWindow(id) {
            // 모든 창과 탭 비활성화
            document.querySelectorAll('.window').forEach(w => w.classList.remove('active'));
            document.querySelectorAll('.task-tab').forEach(t => t.classList.remove('active'));

            // 선택한 창 맨 위로
            const win = document.getElementById(id);
            if (win) {
                win.classList.add('active');
                win.style.zIndex = ++highestZ;
                document.getElementById('tab-' + id).classList.add('active');
            }
        }

        function closeWindow(id) {
            document.getElementById(id).remove();
            document.getElementById('tab-' + id).remove();
        }

        // 시계 업데이트
        setInterval(() => {
            const n = new Date();
            document.getElementById('clock').innerText = n.getHours().toString().padStart(2,'0') + ":" + n.getMinutes().toString().padStart(2,'0');
        }, 1000);
    </script>
</body>
</html>
