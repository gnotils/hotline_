<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>{{ page.title }} | Lableue_Archive</title>
    <style>
        
        /* --- 1. ë³€ìˆ˜ ë° ì‹œìŠ¤í…œ ì»¬ëŸ¬ --- */
        :root {
            --win-bg: #008080;
            --win-silver: #c0c0c0;
            --win-dark: #808080;
            --win-light: #ffffff;
            --scp-red: #901;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--win-bg);
            font-family: "Fixedsys", "Nanum Gothic Coding", monospace;
            height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }

        /* --- 2. ì´ˆí˜„ì‹¤ íš¨ê³¼ (TV ë…¸ì´ì¦ˆ & CRT) --- */
        .noise-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://replicate.delivery/pbxt/J6TzJzG3T6f3ZkX6V5f5JzG3T6f3ZkX6V5f5/noise.png');
            opacity: 0.08; z-index: 10000; pointer-events: none; animation: noise-move 0.2s infinite;
        }
        @keyframes noise-move { 0% { transform: translate(0,0); } 50% { transform: translate(-1%, 1%); } }
        
        .crt-lines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 3px; z-index: 10001; pointer-events: none;
        }

        /* --- 3. ë°”íƒ•í™”ë©´ ì•„ì´ì½˜ (íœ´ì§€í†µ) --- */
        .desktop {
            position: absolute; top: 20px; left: 20px;
            display: flex; flex-direction: column; gap: 20px; z-index: 500;
        }
        .icon {
            width: 70px; text-align: center; cursor: pointer; color: white; font-size: 11px;
            text-shadow: 1px 1px 2px black;
        }
        .icon img { width: 32px; height: 32px; margin-bottom: 5px; image-rendering: pixelated; }

        /* --- 4. ë©”ì¸ ìœˆë„ìš° í”„ë ˆì„ --- */
        .window-frame {
            width: 90%; max-width: 1000px; margin: 30px auto;
            background: var(--win-silver);
            border: 2px solid; border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light);
            display: flex; flex-direction: column; box-shadow: 10px 10px 0px rgba(0,0,0,0.3);
            flex: 1; margin-bottom: 60px; z-index: 1000;
        }
        .title-bar {
            background: linear-gradient(90deg, #000080, #1084d0);
            color: white; padding: 3px 10px; display: flex; justify-content: space-between; align-items: center;
            font-weight: bold; font-size: 14px;
        }
        .title-bar-controls button {
            width: 16px; height: 14px; font-size: 9px; padding: 0; background: var(--win-silver);
            border: 1px solid; border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light);
        }

        .wrapper { display: flex; flex: 1; padding: 5px; gap: 5px; overflow: hidden; }
        nav.side-bar { width: 200px; background: white; border: 2px inset var(--win-silver); padding: 10px; font-size: 12px; }
        nav.side-bar h3 { background: #eee; margin: 0 -10px 10px -10px; padding: 5px 10px; font-size: 11px; border-bottom: 1px solid #ccc; }
        nav.side-bar ul { list-style: none; padding-left: 10px; margin: 0; }
        nav.side-bar li::before { content: "ğŸ“ "; }
        nav.side-bar a { color: black; text-decoration: none; }
        nav.side-bar a:hover { background: #000080; color: white; }

        main.content { flex: 1; background: white; border: 2px inset var(--win-silver); padding: 25px; overflow-y: auto; }
        h1 { color: var(--scp-red); font-size: 24px; border-bottom: 2px double #ccc; }

        /* --- 5. íƒœìŠ¤í¬ë°” & ì‹œì‘ ë©”ë‰´ --- */
        .taskbar {
            position: fixed; bottom: 0; width: 100%; height: 32px;
            background: var(--win-silver); border-top: 2px solid var(--win-light);
            display: flex; align-items: center; padding: 2px; z-index: 9000;
        }
        .start-btn {
            display: flex; align-items: center; gap: 5px; padding: 2px 8px; font-weight: bold; font-size: 13px;
            border: 2px solid; border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light); cursor: pointer;
        }
        .start-btn.active { border-color: var(--win-dark) var(--win-light) var(--win-light) var(--win-dark); background: #e0e0e0; }
        
        .task-tab {
            margin-left: 5px; width: 160px; padding: 2px 8px; border: 2px inset var(--win-light);
            font-size: 11px; display: flex; align-items: center; gap: 5px; background: #d0d0d0;
        }
        .status-tray { margin-left: auto; padding: 2px 10px; border: 2px inset var(--win-light); font-size: 12px; }

        #start-menu {
            display: none; position: fixed; bottom: 32px; left: 2px; width: 200px;
            background: var(--win-silver); border: 2px solid; border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light);
            z-index: 9001; box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        }
        .start-menu-sidebar {
            background: linear-gradient(to top, #000080, #1084d0); width: 25px; padding: 5px; color: white;
            writing-mode: vertical-rl; transform: rotate(180deg); font-weight: bold; text-align: center; font-size: 14px;
        }
        .menu-item { padding: 5px 10px; font-size: 12px; cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .menu-item a { text-decoration: none; color: black; display: flex; align-items: center; gap: 10px; width: 100%; }
        .menu-item:hover { background: #000080; }
        .menu-item:hover, .menu-item:hover a { color: white; }

        /* --- 6. íŒì—… & ì¢…ë£Œ í™”ë©´ --- */
        .popup {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 320px; background: var(--win-silver); border: 2px solid;
            border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light); z-index: 11000;
        }
        #shutdown-screen {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: black; z-index: 20000; justify-content: center; align-items: center; color: orange; text-align: center;
        }
        /* --- 0. ë§ˆìš°ìŠ¤ í¬ì¸í„° --- */
        /* --- ë§ˆìš°ìŠ¤ í¬ì¸í„° ì„¤ì • --- */
        /* ì‚¬ì´íŠ¸ ì „ì²´ ê¸°ë³¸ ì»¤ì„œ */
        html, body, .window-frame, .desktop {
            cursor: url('/assets/image/Cursor79.cur'), auto !important;
        }
        
        /* í´ë¦­ ê°€ëŠ¥í•œ ìš”ì†Œ (ë§í¬, ë²„íŠ¼, ì•„ì´ì½˜) */
        a, button, .start-btn, .icon, .menu-item, .title-bar-controls button {
            cursor: url('/assets/image/Cursor107.cur'), pointer !important;
        }
        
        /* í…ìŠ¤íŠ¸ ì…ë ¥ ë¶€ë¶„ (í•„ìš” ì‹œ) */
        p, span, h1, h3 {
            cursor: url('https://win98icons.alexmeub.com/cursors/arrow.png'), auto !important;
        }
        
        /* ë¡œë”©/ëŒ€ê¸° ì¤‘ì¼ ë•Œ (ëª¨ë˜ì‹œê³„) */
        .waiting, .waiting * {
            cursor: url('/assets/image/Cursor83.cur'), wait !important;
        }
    </style>
</head>
<body>
    <div class="noise-overlay"></div>
    <div class="crt-lines"></div>

    <div class="desktop">
        <div class="icon" onclick="openTrash()">
            <img src="https://win98icons.alexmeub.com/icons/png/recycle_bin_empty-0.png" alt="Trash">
            <br>Recycle Bin
        </div>
    </div>

    <div class="window-frame">
        <div class="title-bar">
            <span>C:\WINDOWS\SYSTEM32\LABLEUE_ARCHIVE.EXE</span>
            <div class="title-bar-controls">
                <button onclick="showError()">_</button> <button onclick="showError()">â–¡</button> <button onclick="showError()">X</button>
            </div>
        </div>
        <div class="wrapper">
            <nav class="side-bar">
                <h3>My Computer</h3>
                <ul>
                    <li><a href="{{ '/' | relative_url }}">C:/Home</a></li>
                    <li><a href="#" class="not-ready">C:/Archives</a></li>
                    <li><a href="{{ '/records' | relative_url }}">C:/Records</a></li>
                </ul>
                <br>
                <h3>Network</h3>
                <ul>
                    <li><a href="https://www.youtube.com/channel/UCSXh537I0WoRYoW1_Xcf2Kw" target="_blank">YouTube</a></li>
                    <li><a href="https://www.postype.com/@la-bleue" target="_blank">POSTYPE</a></li>
                    <li><a href="https://x.com/EuldaLee" target="_blank">X(Twitter)</a></li>
                    <li><a href="https://lumo.gg/u/lableue" target="_blank">Lumo</a></li>
                    <li><a href="https://caveduck.io/user/Lableue" target="_blank">CAVEDUCK</a></li>
                    <li><a href="https://crepe.cm/@Uranus" target="_blank">CREPE</a></li>
                </ul>
            </nav>
            <main class="content">
                <h1>{{ page.title }}</h1>
                {{ content }}
            </main>
        </div>
    </div>

    <div class="taskbar">
        <div class="start-btn" onclick="toggleStartMenu(event)">
            <img src="https://win98icons.alexmeub.com/icons/png/windows-0.png" width="16"> Start
        </div>
        <div class="task-tab">
            <img src="https://win98icons.alexmeub.com/icons/png/msie1-2.png" width="14">
            <span>{{ page.title }}</span>
        </div>
        <div class="status-tray" id="clock">00:00</div>
    </div>

    <div id="start-menu">
        <div style="display: flex;">
            <div class="start-menu-sidebar">Liminal 95</div>
            <ul style="list-style: none; margin: 0; padding: 2px; flex: 1;">
                <li class="menu-item"><a href="{{ '/' | relative_url }}"><img src="https://win98icons.alexmeub.com/icons/png/chm-2.png" width="16"> Home</a></li>
                <li class="menu-item not-ready"><a href="#"><img src="https://win98icons.alexmeub.com/icons/png/directory_open_file_ed-4.png" width="16"> Archive</a></li>
                <hr>
                <li class="menu-item" onclick="shutDown()"><img src="https://win98icons.alexmeub.com/icons/png/shut_down_normal-0.png" width="16"> Shut Down...</li>
            </ul>
        </div>
    </div>

    <div id="trash-popup" class="popup">
        <div class="title-bar"><span>íœ´ì§€í†µ</span><div class="title-bar-controls"><button onclick="closeTrash()">X</button></div></div>
        <div style="padding: 15px; background: white; margin: 5px; border: 2px inset var(--win-silver); font-size: 12px; min-height: 100px; color: black;">
            <p style="color: red; font-weight: bold;">[RESTORED_FILE_09.LOG]</p>
            <div id="mini-popup" class="popup"><span>Recycle Bin</span><div class="title-bar-controls"><button onclick="closeTrash()">X</button></div></div>
            <div style="padding: 15px; background: white; margin: 5px; border: 2px inset var(--win-silver); font-size: 12px; min-height: 100px; color: black;">
                <h4 style="color:blue;"><i>* ë– ëŒì´ë³„ Lableue *</i></h4><hr>
                <p>&gt; E-mail : isijeu66@gmail.com<br>
                &gt; í•˜ê³  ì‹¶ì€ ê±¸ í•˜ëŠ” ì‚¬ëŒ.<br>
                &gt;&gt; ë¬¸ì˜ëŠ” ì´ë©”ì¼</p>
            </div>
            
        </div>
    </div>

    <div id="error-popup" class="popup">
        <div class="title-bar"><span>System Error</span><div class="title-bar-controls"><button onclick="closeError()">X</button></div></div>
        <div style="padding: 20px; display: flex; align-items: center; gap: 15px; background: var(--win-silver);">
            <img src="https://win98icons.alexmeub.com/icons/png/msg_error-0.png" width="32">
            <p id="error-message" style="margin: 0; font-size: 12px; color: black; font-weight: bold;">ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
        <div style="text-align: center; padding-bottom: 10px; background: var(--win-silver);">
            <button onclick="closeError()" style="padding: 2px 20px; border: 2px solid; border-color: var(--win-light) var(--win-dark) var(--win-dark) var(--win-light); cursor: pointer;">í™•ì¸</button>
        </div>
    </div>

    <div id="shutdown-screen">
        <div>
            <h1 style="color: orange; font-size: 24px;">It is now safe to turn off your computer.</h1>
            <p style="color: #444; font-size: 14px;">Microsoft Windows 95</p>
        </div>
    </div>

    <audio id="error-sound" src="https://raw.githubusercontent.com/fevrcr/win98-icons/main/audio/chord.mp3" preload="auto"></audio>

    <script>
        const startMenu = document.getElementById('start-menu');
        const startBtn = document.querySelector('.start-btn');

        function toggleStartMenu(e) {
            e.stopPropagation();
            if (startMenu.style.display === 'block') {
                startMenu.style.display = 'none';
                startBtn.classList.remove('active');
            } else {
                startMenu.style.display = 'block';
                startBtn.classList.add('active');
            }
        }

        function openTrash() { document.getElementById('trash-popup').style.display = 'block'; }
        function closeTrash() { document.getElementById('trash-popup').style.display = 'none'; }
        
        // ë¸Œë¼ìš°ì €ì˜ 'ìë™ ì¬ìƒ ì°¨ë‹¨'ì„ í’€ê¸° ìœ„í•´ ì²« í´ë¦­ ì‹œ ì˜¤ë””ì˜¤ë¥¼ ì¤€ë¹„ì‹œí‚µë‹ˆë‹¤.
        window.addEventListener('click', function() {
            const sound = document.getElementById('error-sound');
            // ì†Œë¦¬ ì—†ì´ í•œ ë²ˆ ì¬ìƒì‹œì¼œ ë¸Œë¼ìš°ì € ê¶Œí•œì„ íšë“í•©ë‹ˆë‹¤.
            sound.muted = true;
            sound.play().then(() => {
                sound.pause();
                sound.muted = false;
            }).catch(e => console.log("Audio prep failed"));
        }, { once: true }); // ë”± í•œ ë²ˆë§Œ ì‹¤í–‰

    function showError(msg) {
        const popup = document.getElementById('error-popup');
        const message = document.getElementById('error-message');
        const sound = document.getElementById('error-sound');

        if(msg) message.innerText = msg;
        popup.style.display = 'block';

        // 2. ì†Œë¦¬ ì¬ìƒ ë¶€ë¶„ ë³´ì •
        if (sound) {
            sound.currentTime = 0; // ì¬ìƒ ìœ„ì¹˜ë¥¼ ì²˜ìŒìœ¼ë¡œ
            sound.play().catch(e => {
                console.log("ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            });
        }
    }
        function closeError() { document.getElementById('error-popup').style.display = 'none'; }

        function shutDown() {
            if(confirm("ì‹œìŠ¤í…œì„ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                // bodyì— waiting í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•´ ì»¤ì„œë¥¼ ëª¨ë˜ì‹œê³„ë¡œ ë³€ê²½
                document.body.classList.add('waiting');
                
                setTimeout(() => {
                    document.getElementById('shutdown-screen').style.display = 'flex';
                    setTimeout(() => { window.close(); }, 3000);
                }, 800); // 0.8ì´ˆê°„ ëª¨ë˜ì‹œê³„ê°€ ë³´ì´ë‹¤ê°€ í™”ë©´ì´ êº¼ì§
            }
        }

        window.onclick = () => { 
            startMenu.style.display = 'none'; 
            startBtn.classList.remove('active');
        };

        function updateClock() {
            const n = new Date();
            document.getElementById('clock').innerText = n.getHours().toString().padStart(2,'0') + ":" + n.getMinutes().toString().padStart(2,'0');
        }
        setInterval(updateClock, 1000); updateClock();

        document.querySelectorAll('.not-ready').forEach(a => {
            a.onclick = (e) => { e.preventDefault(); showError("ë°ì´í„°ê°€ ì†ìƒë˜ì—ˆê±°ë‚˜ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì°¨ì›ì…ë‹ˆë‹¤."); };
        });
    </script>
</body>
</html>
